<div id='room-seg-ui'>
    <div id='container'>
        <div id='dim-container' #dimContainer>
            <img id='room-top-view-image' #roomTopViewImage [src]='imageSrc' (load)='roomImgOnLoad()'>
            <!-- Toggle by removal process -->
            <div *ngIf='!removalProcessStart'>
                <!-- Toggle by segment/extended -->
                <div *ngIf='lineSegment'>
                    <svg #svg  (mouseover)='showCursorPosition(true)' (mouseout)='showCursorPosition(false)' (mousemove)='updateCursorPosition($event)'>
                        <line #line class='line'
                            *ngFor='let line of linesets; let elementIndex = index;' 
                            [attr.x1]='line[0]' [attr.y1]='line[1]' [attr.x2]='line[2]' [attr.y2]='line[3]' 
                            (mouseover)='showExtremities(elementIndex, true)' (mouseout)='showExtremities(-1, true)'
                            (click)='moveSegLine(elementIndex, false)'
                        />
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[0]' [attr.cy]='extremities[1]' r='3'/>
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[2]' [attr.cy]='extremities[3]' r='3'/>
                    </svg>
                </div>
                <!-- Toggle by segment/extended -->
                <div *ngIf='!lineSegment'>
                    <svg #svg (mouseover)='showCursorPosition(true)' (mouseout)='showCursorPosition(false)' (mousemove)='updateCursorPosition($event)'>
                        <line #line class='line'
                            *ngFor='let line of extendedLinesets; let elementIndex = index;' 
                            [attr.x1]='line[0]' [attr.y1]='line[1]' [attr.x2]='line[2]' [attr.y2]='line[3]' 
                            (mouseover)='showExtremities(elementIndex, false)' (mouseout)='showExtremities(-1, false)'
                            (click)='moveSegLine(elementIndex, false)'
                        />
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[0]' [attr.cy]='extremities[1]' r='3'/>
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[2]' [attr.cy]='extremities[3]' r='3'/>
                    </svg>
                </div>
            </div>
            <!-- Toggle by removal process -->
            <div *ngIf='removalProcessStart'>
                <!-- Toggle by segment/extended -->
                <div *ngIf='lineSegment'>
                    <svg #svg  (mouseover)='showCursorPosition(true)' (mouseout)='showCursorPosition(false)' (mousemove)='updateCursorPosition($event)'>
                        <line #line class='line'
                            *ngFor='let line of linesets; let elementIndex = index;' 
                            [attr.x1]='line[0]' [attr.y1]='line[1]' [attr.x2]='line[2]' [attr.y2]='line[3]' 
                            (mouseover)='showExtremities(elementIndex, true)' (mouseout)='showExtremities(-1, true)'
                            (click)='removeLine(elementIndex)'
                        />
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[0]' [attr.cy]='extremities[1]' r='3'/>
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[2]' [attr.cy]='extremities[3]' r='3'/>
                    </svg>
                </div>
                <!-- Toggle by segment/extended -->
                <div *ngIf='!lineSegment'>
                    <svg #svg (mouseover)='showCursorPosition(true)' (mouseout)='showCursorPosition(false)' (mousemove)='updateCursorPosition($event)'>
                        <line #line class='line'
                            *ngFor='let line of extendedLinesets; let elementIndex = index;' 
                            [attr.x1]='line[0]' [attr.y1]='line[1]' [attr.x2]='line[2]' [attr.y2]='line[3]' 
                            (mouseover)='showExtremities(elementIndex, false)' (mouseout)='showExtremities(-1, false)'
                            (click)='removeLine(elementIndex)'
                        />
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[0]' [attr.cy]='extremities[1]' r='3'/>
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[2]' [attr.cy]='extremities[3]' r='3'/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <div id='cursor-position-container' *ngIf='showCursor'>
        <p>
            <em>
                <span id='cursor-position-text'>Cursor position: </span>
                <span class='cursor-position'>x:{{cursorPosition[0]}}</span>
                <span class='cursor-position'>y:{{cursorPosition[1]}}</span>
            </em>
        </p>
        <p id='coor' #coor></p>
    </div>

    <div id='action-button-container'>
        <button (click)='lineSwitch()' mat-stroked-button>Segment/Extended</button>
        <button (click)='lineAdd()' mat-stroked-button>Add a Segmentation Line</button>
        <button (click)='lineRemove()' mat-stroked-button>Remove Segmentation Lines</button>
        <button (click)='segConfirm()' mat-stroked-button>Confirm Result</button>
    </div>

    <div id='process-button-container' *ngIf='processStart'>
        <button (click)='processControl(true)' mat-stroked-button>Confirm Edit</button>
        <button (click)='processControl(false)' mat-stroked-button>Cancel Edit</button>
    </div>
</div>
