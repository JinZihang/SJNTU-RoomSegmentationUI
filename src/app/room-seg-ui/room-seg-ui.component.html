<div id='room-seg-ui'>
    <div id='container'>
        <div id='dim-container' #dimContainer>
            <img id='room-top-view-image' #roomTopViewImage [src]='imageSrc' (load)='roomImgOnLoad()'>
            <!-- Toggle by removal process -->
            <div *ngIf='!removalProcessStart'>
                <!-- Toggle by segment/extended -->
                <div *ngIf='lineSegment'>
                    <svg #svg (mouseover)='showCursorPosition(true)' (mouseout)='showCursorPosition(false)' (mousemove)='updateCursorPosition($event)'>
                        <line #line class='line'
                            *ngFor='let line of linesets; let elementIndex = index;' 
                            [attr.x1]='line[0]' [attr.y1]='line[1]' [attr.x2]='line[2]' [attr.y2]='line[3]' 
                            (mouseover)='showExtremities(elementIndex, true)' (mouseout)='showExtremities(-1, true)'
                            (click)='moveSegLine(elementIndex, false)'
                        />
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[0]' [attr.cy]='extremities[1]' r='3'/>
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[2]' [attr.cy]='extremities[3]' r='3'/>
                        <!-- For the add line process -->
                        <circle class='line-segment-extremity' *ngIf='addLineProcessShowTempExtremity' [attr.cx]='addLineTempExtremity[0]' [attr.cy]='addLineTempExtremity[1]' r='3'/>
                    </svg>
                </div>
                <!-- Toggle by segment/extended -->
                <div *ngIf='!lineSegment'>
                    <svg #svg (mouseover)='showCursorPosition(true)' (mouseout)='showCursorPosition(false)' (mousemove)='updateCursorPosition($event)'>
                        <line #line class='line'
                            *ngFor='let line of extendedLinesets; let elementIndex = index;' 
                            [attr.x1]='line[0]' [attr.y1]='line[1]' [attr.x2]='line[2]' [attr.y2]='line[3]' 
                            (mouseover)='showExtremities(elementIndex, false)' (mouseout)='showExtremities(-1, false)'
                            (click)='moveSegLine(elementIndex, false)'
                        />
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[0]' [attr.cy]='extremities[1]' r='3'/>
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[2]' [attr.cy]='extremities[3]' r='3'/>
                        <!-- For the add line process -->
                        <circle class='line-segment-extremity' *ngIf='addLineProcessShowTempExtremity' [attr.cx]='addLineTempExtremity[0]' [attr.cy]='addLineTempExtremity[1]' r='3'/>
                    </svg>
                </div>
            </div>
            <!-- Toggle by removal process -->
            <div *ngIf='removalProcessStart'>
                <!-- Toggle by segment/extended -->
                <div *ngIf='lineSegment'>
                    <svg #svg (mouseover)='showCursorPosition(true)' (mouseout)='showCursorPosition(false)' (mousemove)='updateCursorPosition($event)'>
                        <line #line class='line'
                            *ngFor='let line of linesets; let elementIndex = index;' 
                            [attr.x1]='line[0]' [attr.y1]='line[1]' [attr.x2]='line[2]' [attr.y2]='line[3]' 
                            (mouseover)='showExtremities(elementIndex, true)' (mouseout)='showExtremities(-1, true)'
                            (click)='removeLine(elementIndex)'
                        />
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[0]' [attr.cy]='extremities[1]' r='3'/>
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[2]' [attr.cy]='extremities[3]' r='3'/>
                    </svg>
                </div>
                <!-- Toggle by segment/extended -->
                <div *ngIf='!lineSegment'>
                    <svg #svg (mouseover)='showCursorPosition(true)' (mouseout)='showCursorPosition(false)' (mousemove)='updateCursorPosition($event)'>
                        <line #line class='line'
                            *ngFor='let line of extendedLinesets; let elementIndex = index;' 
                            [attr.x1]='line[0]' [attr.y1]='line[1]' [attr.x2]='line[2]' [attr.y2]='line[3]' 
                            (mouseover)='showExtremities(elementIndex, false)' (mouseout)='showExtremities(-1, false)'
                            (click)='removeLine(elementIndex)'
                        />
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[0]' [attr.cy]='extremities[1]' r='3'/>
                        <circle class='line-segment-extremity' *ngIf='extremities[0]' [attr.cx]='extremities[2]' [attr.cy]='extremities[3]' r='3'/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <div id='cursor-position-container' *ngIf='showCursor'>
        <p>
            <em>
                <span id='cursor-position-text'>Cursor position: </span>
                <span class='cursor-position-value'>x:{{cursorPosition[0]}}</span>
                <span class='cursor-position-value'>y:{{cursorPosition[1]}}</span>
            </em>
        </p>
    </div>

    <div id='action-button-container'>
        <button mat-stroked-button (click)='lineSwitch()' >Segment/Extended</button>
        <button mat-stroked-button (click)='lineAdd(false, -1, [])'>Add a Segmentation Line</button>
        <button mat-stroked-button (click)='lineRemove(false)'>Remove Segmentation Lines</button>
        <button mat-stroked-button (click)='segConfirm()'>Confirm Result</button>
    </div>

    <div id='process-button-container' *ngIf='processStart'>
        <button mat-stroked-button (click)='processControl(true)'>Confirm Edit</button>
        <button mat-stroked-button (click)='processControl(false)'>Cancel Edit</button>
    </div>

    <form id='coor-input' *ngIf='addProcessStart'>
        <div class='extremityCoorInput'>
            <mat-form-field appearance='fill'>
                <mat-label>1st Extremity's X</mat-label>
                <input #firstExtremX matInput placeholder='Input coordinate value' (keyup)="addLineInputOnKey('firstExtremX', firstExtremX.value, false)" [formControl]='firstExtremXCoorCheck' required>
                <mat-error *ngIf="firstExtremXCoorCheck.invalid">{{getErrorMessage('firstExtremXCoor')}}</mat-error>
              </mat-form-field>
              <mat-form-field appearance='fill'>
                <mat-label>1st Extremity's Y</mat-label>
                <input #firstExtremY matInput placeholder='Input coordinate value' (keyup)="addLineInputOnKey('firstExtremY', firstExtremY.value, false)" [formControl]='firstExtremYCoorCheck' required>
                <mat-error *ngIf="firstExtremYCoorCheck.invalid">{{getErrorMessage('firstExtremYCoor')}}</mat-error>
              </mat-form-field>
        </div>
        <div class='extremityCoorInput'>
            <mat-form-field appearance='fill'>
                <mat-label>2nd Extremity's X</mat-label>
                <input #secondExtremX matInput placeholder='Input coordinate value' (keyup)="addLineInputOnKey('secondExtremX', secondExtremX.value, false)" [formControl]='secondExtremXCoorCheck' required>
                <mat-error *ngIf="secondExtremXCoorCheck.invalid">{{getErrorMessage('secondExtremXCoor')}}</mat-error>
              </mat-form-field>
              <mat-form-field appearance='fill'>
                <mat-label>2nd Extremity's Y</mat-label>
                <input #secondExtremY matInput placeholder='Input coordinate value' (keyup)="addLineInputOnKey('secondExtremY', secondExtremY.value, false)" [formControl]='secondExtremYCoorCheck' required>
                <mat-error *ngIf="secondExtremYCoorCheck.invalid">{{getErrorMessage('secondExtremYCoor')}}</mat-error>
              </mat-form-field>
        </div>
    </form>

    <div id='action-button-disable' *ngIf='actionButtonDisable'></div>
    <div id='process-confirm-button-disable' *ngIf='processConfirmButtonDisable'></div>
</div>